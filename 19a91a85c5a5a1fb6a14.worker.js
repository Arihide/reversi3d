!function(t){var i={};function e(s){if(i[s])return i[s].exports;var r=i[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var r in t)e.d(s,r,function(i){return t[i]}.bind(null,r));return s},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){"use strict";e.r(i);const s=[0,9,1,10,13,21,2,29,11,14,16,18,22,25,3,30,8,12,20,28,15,17,24,7,19,27,23,6,26,5,4,31];class r{constructor(t=0,i=0){this.buf=new ArrayBuffer(8),this.p=new Uint32Array(this.buf),this.p[0]=t,this.p[1]=i}not(){return this.p[0]=~this.p[0],this.p[1]=~this.p[1],this}or(t){return this.p[0]=t.p[0]|this.p[0],this.p[1]=t.p[1]|this.p[1],this}and(t){return this.p[0]=t.p[0]&this.p[0],this.p[1]=t.p[1]&this.p[1],this}xor(t){return this.p[0]=t.p[0]^this.p[0],this.p[1]=t.p[1]^this.p[1],this}set(t,i){this.p[0]=t,this.p[1]=i}addOne(){return this.p[1]++,0===this.p[1]&&this.p[0]++,this}subOne(){return 0===this.p[1]&&this.p[0]--,this.p[1]--,this}addPer8bit(t){let i=new Uint8Array(this.buf),e=new Uint8Array(t.buf);return i[0]+=e[0],i[1]+=e[1],i[2]+=e[2],i[3]+=e[3],i[4]+=e[4],i[5]+=e[5],i[6]+=e[6],i[7]+=e[7],this}isZero(){return 0===this.p[0]&&0===this.p[1]}copy(t){return this.p[0]=t.p[0],this.p[1]=t.p[1],this}clone(){return new r(this.p[0],this.p[1])}shiftUp(){return this.p[0]=this.p[0]<<8|this.p[1]>>>24&255,this.p[1]=this.p[1]<<8,this}shiftDown(){return this.p[1]=this.p[1]>>>8|this.p[0]<<24&4278190080,this.p[0]=this.p[0]>>>8,this}shiftLeft(){return this.p[0]=(2139062143&this.p[0])<<1,this.p[1]=(2139062143&this.p[1])<<1,this}shiftRight(){return this.p[0]=(4278124286&this.p[0])>>>1,this.p[1]=(4278124286&this.p[1])>>>1,this}pureLeftShift(t){return t>0&&t<32?(this.p[0]=this.p[0]<<t|this.p[1]>>>32-t,this.p[1]=this.p[1]<<t):t>0&&t<64&&(this.p[0]=this.p[1]<<t-32,this.p[1]=0),this}pureRightShift(t){return t>0&&t<32?(this.p[1]=this.p[1]>>>t|this.p[0]<<32-t,this.p[0]=this.p[0]>>>t):t>0&&t<64&&(this.p[1]=this.p[0]>>>t-32,this.p[0]=0),this}numOfOne(){let t=this.p[0],i=this.p[1];return t=(1431655765&t)+((2863311530&t)>>>1),t=(858993459&t)+((3435973836&t)>>>2),t=(252645135&t)+((4042322160&t)>>>4),t=(16711935&t)+((4278255360&t)>>>8),t=(65535&t)+((4294901760&t)>>>16),i=(1431655765&i)+((2863311530&i)>>>1),i=(858993459&i)+((3435973836&i)>>>2),i=(252645135&i)+((4042322160&i)>>>4),i=(16711935&i)+((4278255360&i)>>>8),i=(65535&i)+((4294901760&i)>>>16),t+i}deltaSwap(t,i){let e=this.clone().pureRightShift(i).xor(this).and(t);this.xor(e),e.pureLeftShift(i),this.xor(e)}rotate90(){this.flipVertical(),this.flipDiagA8H1()}rotate180(){this.flipVertical(),this.mirrorHorizontal()}rotate270(){this.flipDiagA8H1(),this.flipVertical()}flipVertical(){let t=new r(16711935,16711935);this.deltaSwap(t,8),t.p[0]=t.p[1]=65535,this.deltaSwap(t,16),[this.p[0],this.p[1]]=[this.p[1],this.p[0]]}mirrorHorizontal(){let t=new r(1431655765,1431655765);this.deltaSwap(t,1),t.p[0]=t.p[1]=858993459,this.deltaSwap(t,2),t.p[0]=t.p[1]=252645135,this.deltaSwap(t,4)}flipDiagA1H8(){let t=new r(4042322160,252645135);this.deltaSwap(t,36),t.p[0]=t.p[1]=3435921408,this.deltaSwap(t,18),t.p[0]=t.p[1]=2852170240,this.deltaSwap(t,9)}flipDiagA8H1(){let t=new r(0,4042322160);this.deltaSwap(t,28),t.p[0]=t.p[1]=52428,this.deltaSwap(t,14),t.p[0]=t.p[1]=11141290,this.deltaSwap(t,7)}static bbSetMask(t){let i=new r;return t<32?i.p[0]=1<<31-t:i.p[1]=1<<63-t,i}static bitScan(t,i=0){let e=t.p[0];if(i<32&&(e<<=i,e>>>=i,0!=e)){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,31-s[130329821*e>>>27]}if(e=t.p[1],e<<=i<32?0:i-32,e>>>=i<32?0:i-32,0!=e&&i<64){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,31-s[130329821*e>>>27]+32}return-1}}const n=27,h=28,o=35,p=36,a=63;class l{constructor(t,i,e,s){this.color=t,this.place=i,this.flip=e,this.bbflip=s}static createFromBBFlip(t,i,e){let s=[],n=r.bitScan(e);for(;-1!==n;)s.push(n),n=r.bitScan(e,n+1);return new l(t,i,s,e)}static getPassMove(t){return 0===t?f:1===t?u:void 0}}const f=new l(0,64,[],new r),u=new l(1,64,[],new r),c=(new r,[]);for(let t=0;t<=a;t++)c[t]=r.bbSetMask(t);class d{constructor(){this.initialBoard=[],this.bitboard=[new r,new r],this._legalMoves=null,this.initialize()}initialize(t=[h,o],i=[p,n]){this.turn=0,this.initialBoard[0]=t,this.initialBoard[1]=i,this.playedMoves=[],this.bitboard[0].set(0,0),this.bitboard[1].set(0,0);for(let i of t)this.bitboard[0].xor(c[i]);for(let t of i)this.bitboard[1].xor(c[t]);this._legalMoves=null}get legalMoves(){return this._legalMoves||(this._legalMoves=this.generateLegalMoves()),this._legalMoves}get blackDiscNum(){return this.bitboard[0].numOfOne()}get whiteDiscNum(){return this.bitboard[1].numOfOne()}pushMove(t){let i;if(64===t)i=l.getPassMove(this.turn);else{let e=this.flip(t);this.bitboard[this.turn].xor(c[t]),this.bitboard[0].xor(e),this.bitboard[1].xor(e),i=l.createFromBBFlip(this.turn,t,e)}return this.playedMoves.push(i),this._legalMoves=null,this.turn^=1,i}popMove(){let t=this.playedMoves.pop();if(void 0!==t)return 64!==t.place&&(this.bitboard[t.color].xor(c[t.place]),this.bitboard[0].xor(t.bbflip),this.bitboard[1].xor(t.bbflip)),this._legalMoves=null,this.turn^=1,t}checkGameOver(){if(0===this.generateLegalMoves().length){if(this.turn^=1,0===this.generateLegalMoves().length)return this.turn^=1,!0;this.turn^=1}return!1}generateLegalMoves(){let t=this.bitboard[this.turn],i=this.bitboard[1^this.turn],e=new r,s=new r;e.copy(t).shiftLeft().and(i);for(let t=0;t<5;t++)s.or(e.shiftLeft()),e.and(i);s.or(e.shiftLeft()),e.copy(t).shiftRight().and(i);for(let t=0;t<5;t++)s.or(e.shiftRight()),e.and(i);s.or(e.shiftRight()),e.copy(t).shiftUp().and(i);for(let t=0;t<5;t++)s.or(e.shiftUp()),e.and(i);s.or(e.shiftUp()),e.copy(t).shiftDown().and(i);for(let t=0;t<5;t++)s.or(e.shiftDown()),e.and(i);s.or(e.shiftDown()),e.copy(t).shiftLeft().shiftUp().and(i);for(let t=0;t<5;t++)s.or(e.shiftLeft().shiftUp()),e.and(i);s.or(e.shiftLeft().shiftUp()),e.copy(t).shiftLeft().shiftDown().and(i);for(let t=0;t<5;t++)s.or(e.shiftLeft().shiftDown()),e.and(i);s.or(e.shiftLeft().shiftDown()),e.copy(t).shiftRight().shiftUp().and(i);for(let t=0;t<5;t++)s.or(e.shiftRight().shiftUp()),e.and(i);s.or(e.shiftRight().shiftUp()),e.copy(t).shiftRight().shiftDown().and(i);for(let t=0;t<5;t++)s.or(e.shiftRight().shiftDown()),e.and(i);s.or(e.shiftRight().shiftDown()),e.copy(t).or(i).not(),s.and(e);let n=[],h=r.bitScan(s);for(;-1!==h;)n.push(h),h=r.bitScan(s,h+1);return n}flip(t){const i=[new r(8421504,2155905152),new r(2130706432,0),new r(16909320,270548992),new r(4202512,134480385)],e=[new r(16843009,16843008),new r(0,254),new r(132104,270549120),new r(2151686160,134480384)];let s,n,h=this.bitboard[this.turn],o=this.bitboard[1^this.turn],p=new r,a=new r;for(let l=0;l<4;l++)n=i[l],n.pureRightShift(t),a.copy(o),l&&(a.p[0]&=2122219134,a.p[1]&=2122219134),s=r.bitScan(a.not().and(n)),a.p[0]=2147483648,a.p[1]=0,a.pureRightShift(s),a.and(h),a.not().addOne().pureLeftShift(1),a.and(n),p.or(a),n=e[l],n.pureLeftShift(63-t),a.copy(o),l&&(a.p[0]&=2122219134,a.p[1]&=2122219134),a.not().and(n).not().addOne().and(n).and(h),!0!==a.isZero()&&(a.subOne(),a.and(n),p.or(a));return p}}function b(){}Object.assign(b.prototype,{addEventListener:function(t,i){void 0===this._listeners&&(this._listeners={});var e=this._listeners;void 0===e[t]&&(e[t]=[]),-1===e[t].indexOf(i)&&e[t].push(i)},hasEventListener:function(t,i){if(void 0===this._listeners)return!1;var e=this._listeners;return void 0!==e[t]&&-1!==e[t].indexOf(i)},removeEventListener:function(t,i){if(void 0!==this._listeners){var e=this._listeners[t];if(void 0!==e){var s=e.indexOf(i);-1!==s&&e.splice(s,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var i=this._listeners[t.type];if(void 0!==i){t.target=this;for(var e=i.slice(0),s=0,r=e.length;s<r;s++)e[s].call(this,t)}}}});class v{constructor(){this.isComputer=!0}startTurn(t,i){setTimeout(this.computeMove.bind(this,t,i),0)}computeMove(t,i){throw new Error("You need to override 'compute' method")}}const w=new d,g=new class extends v{constructor(){super(),this.color}computeMove(t,i){this.color=t.turn;let e,s=64,r=-1/0;for(let i of t.legalMoves)t.pushMove(i),e=-this._alphaBetaEval(t,3,-1/0,1/0),r<e&&(r=e,s=i),t.popMove(i);i(s)}_alphaBetaEval(t,i,e,s){if(i<=0)return this._evalute(t,t.turn);if(0===t.legalMoves.length)return t.pushMove(64),e=-this._alphaBetaEval(t,i-1,-s,-e),t.popMove(),e;for(let r of t.legalMoves)if(t.pushMove(r),e=Math.max(e,-this._alphaBetaEval(t,i-1,-s,-e)),t.popMove(),e>=s)return e;return e}_evalute(t,i){const e=[0,100,-50,100,10,100,-50,100];let s=0,r=t.bitboard[i].clone(),n=r.p[0]>>>24,h=255&r.p[1];return s+=o(n),s+=o(h),r.rotate90(),n=r.p[0]>>>24,h=255&r.p[1],s+=o(n),s+=o(h),r.copy(t.bitboard[1^i]),n=r.p[0]>>>24,h=255&r.p[1],s-=o(n),s-=o(h),r.rotate90(),n=r.p[0]>>>24,h=255&r.p[1],s-=o(n),s-=o(h),r.copy(t.bitboard[i]),r.p[0]&=2151686160,r.p[1]&=134480385,n=16843009*(r.p[0]|r.p[1])>>>24,s+=o(n),r.copy(t.bitboard[i]),r.p[0]&=16909320,r.p[1]&=270549120,n=16843009*(r.p[0]|r.p[1])>>>24,s+=o(n),r.copy(t.bitboard[1^i]),r.p[0]&=2151686160,r.p[1]&=134480385,n=16843009*(r.p[0]|r.p[1])>>>24,s-=o(n),r.copy(t.bitboard[1^i]),r.p[0]&=16909320,r.p[1]&=270549120,n=16843009*(r.p[0]|r.p[1])>>>24,s-=o(n),s;function o(t){return e[7&t]+e[function(t){switch(t){case 0:case 2:case 5:case 7:return t;case 1:return 4;case 3:return 6;case 4:return 1;case 6:return 3;default:throw new Error}}(t>>>5)]}}};self.addEventListener("message",t=>{w.initialize();for(let i of t.data)w.pushMove(i.place);g.computeMove(w,t=>{self.postMessage(t)})})}]);